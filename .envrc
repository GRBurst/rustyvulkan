source_up_if_exists

if [[ -f .envrc.local ]]; then
	source .envrc.local
	watch_file .envrc.local
fi

if [[ -f "shell.nix" ]]; then
	watch_file shell.nix
fi

if [[ -f flake.nix ]] && command -v nix &>/dev/null; then
	if [[ "${WITH_IDE:-}" == "true" ]] || [[ "${WITH_IDE:-}" == "1" ]]; then
        use flake . --impure
    else
        use flake .
    fi
fi
